<div class="loading" *ngIf="loading; else settings">
    <mat-spinner></mat-spinner>
</div>

<ng-template #settings>
    <mat-card>
        <mat-card-header>
            <mat-card-title class="main-title">
                <span class="title-container">
                    <mat-icon>person</mat-icon>
                    Account
                </span>
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <app-profile></app-profile>
            <mat-nav-list>
                <mat-list-item (click)="logout()">Log out</mat-list-item>
                <a mat-list-item routerLink="download-personal-data">Download personal data</a>
                <mat-list-item (click)="deleteAccount()">Delete account</mat-list-item>
            </mat-nav-list>
        </mat-card-content>
    </mat-card>
    <mat-card>
        <mat-card-header>
            <mat-card-title class="main-title">
                <span class="title-container">
                    <mat-icon>info</mat-icon>
                    Info
                </span>
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-nav-list>
                <a mat-list-item routerLink="/privacy">Privacy</a>
                <a mat-list-item routerLink="/terms-and-conditions">Terms & Conditions</a>
                <a mat-list-item routerLink="/third-party">Third Party</a>
            </mat-nav-list>
        </mat-card-content>
    </mat-card>
</ng-template>

<ng-template #deleteDialog>
    <h1 mat-dialog-title>Attenzione</h1>
    <div mat-dialog-content>
        Questo eliminerà il tuo account e tutti i tuoi dati.<br>
        Continuare?
    </div>
    <div mat-dialog-actions>
        <button mat-raised-button color="primary" [mat-dialog-close]="true">Sì</button>
        <button mat-button [mat-dialog-close]="false" cdkFocusInitial>No</button>
    </div>
</ng-template>

<ng-template #accountDeletedDialog>
    <h1 mat-dialog-title>Fatto</h1>
    <div mat-dialog-content>
        Tutti i tuoi dati sono stati eliminati.
    </div>
    <div mat-dialog-actions>
        <button mat-raised-button color="primary" mat-dialog-close>Torna alla home</button>
    </div>
</ng-template>